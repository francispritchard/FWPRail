Things to do:

19/11/14
Write registry data to .ini file

DataCheck : add CRLF

22/10/14
Add Grid stuff to WhatisUnderMouse

FUNCTION ValidateGridX(Str : String; OUT ErrorMsg : String) : Integer;
{ Converts grid string to number }  { add >= 0 and <- 999 **************** and rename StrToGrid }

26/6/14
Create loco record

24/6/14
Weird error msg: 06:30:00 T 0072 TC=99999 [] not set to TCPermanentFeedbackOccupation as train is marked as ready for creation [Diagrams]

14/6/14
Pressing Enter doesn't do anything in Loco Dialogue
Unsetting printing colours doesn't work

11/6/14
Contradiction of:
"No routes to clear
Routeing for express passenger trains
Route setting-up failed (: L=UMA1 already locked by R=1: route setting failure)"

8/6/14
F5 showing trackcircuits - end of line ones are in a larger font

Recheck journeys after Lenz is started

Add function chips to loco database and cross-check. Also check non-loco field has a corresponding description.

5/6/14
Hold train outside platform if routeing to 9B if train would otherwise wait in 8A (as passengers would get annoyed)

24/4/14 
Do log arrays in log window
"Enter train location" "No feedback found" - huge window for loco number
"Diagrams error - unknown location" - no opportunity to enter a new location
Do diagrams processing before Lenz checking

31/8/09
Try OnShortCut rather than intercept Messages?

Fixed: 3 way signals
return trains from anyway to home stations (after failure)

09/03/08
routeing train held outside station if route ahead not clear

06/03/08
adjust final deceleration before stopping based on overlap

29/02/08
priority at Branch Mid Station should be based on train type

28/02/08
if choice between something leaving FY and something going in, allow stuff to leave first

18/02/08 
check non-through lines work properly - should stop traffic traversing the FY

18/02/08
if route fails because no location available, step back to see if changing the previous location would solve the problem

15/10/07
implement "time of operation locking"?

03/10/07
Fixed: ten minute delays in timetable

08/01/06 
Fixed: if .csv file open in Excel, can't load in program

01/02/03
fix trains waiting then moving to end of platform then reversing!

07/03/05 
Trains leaving P7 up should probably be routed after the first
crossover to the up line, not as the autorouting does to the second,
to allow something to come in from the Up. Unless something better
leaving P9 etc.

20/11/05
Type 2 trains go on goods line - need to check if main line is free

11/02/05 
Fixed: Three way points - set up pointrec to make sure they switch in
the right order

30/01/03
Fixed: fix hold/release to explain why releasing happens

17/02/02 
If short train stops in first half of the platform, don't make it stop
in second half too - don't let it into platform if it wouldn't fit
anyway, or if it's not a stopping train, don't let it into the
platform unless it's signalled through.

16/12/01
If train set to go into P7 (as opposed to P7A or P7B), if it is short enough,
stop it just after the central section, rather than make it go to the end
of the long platform

16/12/01
In P8A, if train is long enough, allow to enter section after the stop
section

22/10/01
Loco taken over sets it to manual control

---
Check permanently occupied lines against newly read in routeing cache.

allow routeing through before one minute if nothing due to come in other direction
allow timetabling without specifying intermediate stations (or directions)

if route is to a buffer stop via a single line with no trailing points then see if the location at the end is empty

fix tclocochip = 0 when setting system occupations

stop trains at stations even if signal is green

Journeys:

6. immediately the first journey is set up, perhaps put a reservation on the second journey's TCs - we don't want a coal train trundling out in front 
   of an express; reservations to be cancelled once journey 2 is set up. 

7. maybe put reservation on routes about to be set up - so expresses about to leave the fiddleyard get priority

destination:

1. is it occupied?

2. is it going to clear? (when? do we have to re-route the train, or perhaps cancel it?

3. can it leave? (are we blocking its given exit route?)


platforms and sub-platforms:

1. where next journey is going determines which sub-platform we want to be in - if going up, then the up platform, etc.

2. can we get to the platform?

  if we're coming in from up, and going out to down, we want to be in the down platform - but is the up platform occupied preventing us from getting there?

3. can we use an alternative platform?
 
  if we're coming in from up, and going out to down, we would like to be in the down platform - but if the down platform is occupied, and the up platform
  isn't, then we could go in the up platform - but only if the train in the down platform is itself going to down, leaving before our train leaves.

4. if we're a long train, which won't fit in the subplatform, are both subplatforms free? If so, book both of them

track occupancy to follow point changes - e.g. r all the way up to p1 when
going into p3

if train stalls, stop until operator says ok - may need to re-timetable
service

catch escaping trains that should be stationary - e.g. 06 in FY10 and
57 in FY9 - timetable mistakenly says other way round - so 06 sets out
on wrong route

if something waiting for a platform on down main approach, something else
could be routed via down goods into another platform

timetable check should see if two trains due to leave same FY at same time!

fixed - set routes out of station in advance of train departures

fixed - stop junction signal changing to green when set to diverge unless train
close to them (check signal book for exact rule)

Give locations and trains, and system should build its own timetable based
on known parameters

If no FYs free, hold incoming train in station, or at least before
multiple crossovers, to allow trains to leave the FY to make room!

should it be possible to pull points a and _ if track circuits p and S are
occupied?

ExitProc which saves state of where things are, etc. to allow a restart in
same state

**************************************
    ! Name: Changing the font name of your h
    !     ints
    ! Description:This tip will tell you how
    !     to change the font and other properties 
    !     of the hint window. You will also learn 
    !     some things about TCanvas this way.
    ! By: Emiel Hollander
    !
    !This code is copyrighted and has    ! limited warranties.Please see http://w
    !     ww.1JStreet.com/vb/scripts/ShowCode.asp?
    !     txtCodeId=58&lngWId=7    !for details.    !**************************************
    
    First, you need to make a descendant of the THintWindow type. I'll call it TAltHintWindow in this tip. The declaration goes like this: 
    type
    TAltHintWindow = class(THintWindow)
    constructor Create(AOwner: TComponent); override;
    end;
    Please note that there is no semicolon after the second row. You need to place this declaration after the row which says 
    {$R *.DFM} 
    in the implementation part of the unit. Then you need to fill the constructor of the newly created TAltHintWindow to reflect the changed you would like to see made to the hint window. The first three rows will be like this: 
    constructor TAltHintWindow.Create(AOwner: TComponent);
    begin
    inherited Create(AOwner);
    You always have to call the constructor of the class you have descended the new class from, because that class might also need to do some initialization. 
    Next, you can make the changes you like to the canvas of this form. You can e.g. change the background colour, or the font name. Try the following for a red hint box with large Times New Roman letters: 
    Canvas.Font.Name := 'Times New Roman';
    Canvas.Font.Size := 18;
    Canvas.Brush.Color := clRed;
    If you search Delphi's help for TCanvas you will find lots of other properties you can change to adjust the hintbox to your personal preferences. 
    Then, in the Form.Create procedure you have to add the following three lines: 
    Application.ShowHint := false;
    HintWindowClass := TAltHintWindow;
    Application.ShowHint := true;
    This code makes sure that the application uses the newly created type TAltHintWindow for the hint windows, instead of the usual THintWindow.

------------------------------------------------

Check permanently occupied lines against newly read in routeing cache.

allow routeing through before one minute if nothing due to come in other direction
allow timetabling without specifying intermediate stations (or directions)


if route is to a buffer stop via a single line with no trailing points then see if the location at the end is empty

fix tclocochip = 0 when setting system occupations

stop trains at stations even if signal is green

Journeys:

6. immediately the first journey is set up, perhaps put a reservation on the second journey's TCs - we don't want a coal train trundling out in front 
   of an express; reservations to be cancelled once journey 2 is set up. 

7. maybe put reservation on routes about to be set up - so expresses about to leave the fiddleyard get priority

destination:

1. is it occupied?

2. is it going to clear? (when? do we have to re-route the train, or perhaps cancel it?

3. can it leave? (are we blocking its given exit route?)


platforms and sub-platforms:

1. where next journey is going determines which sub-platform we want to be in - if going up, then the up platform, etc.

2. can we get to the platform?

  if we're coming in from up, and going out to down, we want to be in the down platform - but is the up platform occupied preventing us from getting there?

3. can we use an alternative platform?
 
  if we're coming in from up, and going out to down, we would like to be in the down platform - but if the down platform is occupied, and the up platform
  isn't, then we could go in the up platform - but only if the train in the down platform is itself going to down, leaving before our train leaves.

4. if we're a long train, which won't fit in the subplatform, are both subplatforms free? If so, book both of them

